{"ast":null,"code":"import _slicedToArray from\"/Users/saipavanmaram/Documents/AUCM/courses/Master'sProject/react_rent_a_car/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useEffect}from\"react\";import{useState}from\"react\";import\"../../styles/booking-form.css\";import{Form,FormGroup}from\"reactstrap\";import validator from'validator';import{Container,Row,Col}from\"reactstrap\";import\"../../styles/booking-form.css\";import\"../../styles/payment-method.css\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";//import userData from \"../../assets/data/userData\";\nimport axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForgotPass=function ForgotPass(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),usernameval=_useState4[0],setusernameval=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),pwd=_useState6[0],setPwd=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),users_arr=_useState10[0],setUsers_arr=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),userdet_arr=_useState12[0],setUsersdet_arr=_useState12[1];var loginNameRef=useRef();var loginPasswordRef=useRef();var fetchData=function fetchData(){fetch(\"https://63895b77c5356b25a2feb5ca.mockapi.io/users\").then(function(response){return response.json();}).then(function(data){var usrs=data;console.log(usrs);setUsers_arr(usrs);fetchUserDetData();});};var fetchUserDetData=function fetchUserDetData(){fetch(\"https://63895b77c5356b25a2feb5ca.mockapi.io/registeredusers\").then(function(response){return response.json();}).then(function(data){var usrsdata=data;console.log(usrsdata);setUsersdet_arr(usrsdata);});};useEffect(function(){setErrorMessage('');},[usernameval,pwd]);useEffect(function(){fetchData();},[]);var navigate=useNavigate();var submitHandler=function submitHandler(e){var usrname=users_arr.filter(function(user){return user.username===usernameval;});console.log(\"usegf\");console.log(usrname);if(usrname.length){console.log(\"userid\");var userId=usrname[0].id;console.log(userId);var userar=userdet_arr.filter(function(user){return user.username===usernameval;});axios.put('https://63895b77c5356b25a2feb5ca.mockapi.io/users/'+userId,{'password':pwd}).then(function(response){console.log(response);var resd=response.status;if(resd==200){axios.put('https://63895b77c5356b25a2feb5ca.mockapi.io/registeredusers/'+userId,{'password':pwd}).then(function(response){console.log(response);var resd=response.status;if(resd==200){alert(\"Password Change Sucessful\");// localStorage.setItem('email',email)\nnavigate(\"/login\");}else{alert(\"Network error or API error\");}}).catch(function(error){console.log(error);});}}).catch(function(error){console.log(error);});}else{alert(\"User account doesn't exist. Please register with us\");}e.preventDefault();};return/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(FormGroup,{className:\"booking__form d-inline-block me-4 mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,ref:loginNameRef,onChange:function onChange(e){return setusernameval(e.target.value);},value:usernameval})}),/*#__PURE__*/_jsx(FormGroup,{className:\"booking__form d-inline-block me-4 mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",required:true,ref:loginPasswordRef,onChange:function onChange(e){return setPwd(e.target.value);},value:pwd})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"div\",{className:\"payment text-center mt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Recover Password\"})})})]});};export default ForgotPass;","map":{"version":3,"names":["React","useRef","useEffect","useState","Form","FormGroup","validator","Container","Row","Col","Link","useNavigate","axios","ForgotPass","errorMessage","setErrorMessage","usernameval","setusernameval","pwd","setPwd","success","setSuccess","users_arr","setUsers_arr","userdet_arr","setUsersdet_arr","loginNameRef","loginPasswordRef","fetchData","fetch","then","response","json","data","usrs","console","log","fetchUserDetData","usrsdata","navigate","submitHandler","e","usrname","filter","user","username","length","userId","id","userar","put","resd","status","alert","catch","error","preventDefault","target","value"],"sources":["/Users/saipavanmaram/Documents/AUCM/courses/Master'sProject/react_rent_a_car/src/components/UI/Forgotpassword.jsx"],"sourcesContent":["import React,{useRef,useEffect} from \"react\";\nimport {useState} from \"react\";\nimport \"../../styles/booking-form.css\";\nimport { Form, FormGroup } from \"reactstrap\";\nimport validator from 'validator';\nimport { Container, Row, Col } from \"reactstrap\";\nimport \"../../styles/booking-form.css\";\nimport \"../../styles/payment-method.css\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n//import userData from \"../../assets/data/userData\";\n\nimport axios from 'axios'\n\nconst ForgotPass = () => {\n\t\n\t  const [errorMessage, setErrorMessage] = useState('');\n\t  const [usernameval , setusernameval] = useState('');\n\t   const [pwd, setPwd] = useState('');\n\t   const [success, setSuccess] = useState(false);\n\t   const [users_arr, setUsers_arr] = useState([]);\n\t   const [userdet_arr, setUsersdet_arr] = useState([]);\n  const loginNameRef = useRef();\n  const loginPasswordRef = useRef();\n  \n  \n  \n  const fetchData =()=>{\nfetch(\"https://63895b77c5356b25a2feb5ca.mockapi.io/users\")\n      \n.then((response) =>{\nreturn response.json(); \n}).then((data)=>{\nlet usrs = data;\nconsole.log(usrs); \nsetUsers_arr(usrs);\nfetchUserDetData();\n})\n}\n\n const fetchUserDetData =()=>{\nfetch(\"https://63895b77c5356b25a2feb5ca.mockapi.io/registeredusers\")\n.then((response) =>{\nreturn response.json(); \n}).then((data)=>{\nlet usrsdata = data;\nconsole.log(usrsdata); \nsetUsersdet_arr(usrsdata);\n\n})\n}\n  \n\n\n    useEffect(() => {\n\t\t\n\t\n        setErrorMessage('');\n    }, [usernameval, pwd])\n\n\n   useEffect(() => {\n\t\t\n\t\n        fetchData();\n    }, [])\n\n\n\n const navigate = useNavigate();\t\n  const submitHandler = (e) => {\n\t  \n\t  const usrname = users_arr.filter(user => user.username === usernameval );\n\t\n\t  \n\t  console.log(\"usegf\");\n\t  console.log(usrname);\n\t \n\t  \n\t  \n\t  if(usrname.length)\n\t  {\n           console.log(\"userid\");\n\t \n           const userId = usrname[0].id\n            console.log(userId);\n\t\t  const userar = userdet_arr.filter(user => user.username === usernameval );\n\t\t\n          \n          \t\t  \n\t\t  \n\t\t\t\taxios\n.put('https://63895b77c5356b25a2feb5ca.mockapi.io/users/'+userId,{'password':pwd})\n.then(response => {\n\tconsole.log(response);\n\t\n\tconst resd = response.status;\n\t\n\tif (resd == 200)\n\t{\n\t\t\n\t\t\t\t\t  \t\taxios\n.put('https://63895b77c5356b25a2feb5ca.mockapi.io/registeredusers/'+userId,{'password':pwd})\n        \n.then(response => {\n\tconsole.log(response);\n\t\n\tconst resd = response.status;\n\t\n\tif (resd == 200)\n\t{\n\t\t\nalert(\"Password Change Sucessful\");\n       // localStorage.setItem('email',email)\n\t\tnavigate(\"/login\");\n\n\t\t\n\t}\n\telse{\n\t\t\n\t\talert(\"Network error or API error\");\n\t}\n\t\n\t \n})\n\n.catch(error => {\nconsole.log(error);\n})\n\n\t\t\n\t\t\n\t\t\n\t}\n\t\n\t \n})\n\n.catch(error => {\nconsole.log(error);\n})\n\n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n          \n\t\n\t  }\n\t  else{\n\t\t alert(\"User account doesn't exist. Please register with us\");\n\t }\n\t  \n\t  \n\n   e.preventDefault();\n  };\n\n  return (\n    \n              <Form  onSubmit={submitHandler}>\n                <FormGroup className=\"booking__form d-inline-block me-4 mb-4\">\n                  <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    required\n                    ref={loginNameRef}\n\t\t\t\t\tonChange={(e) => setusernameval(e.target.value)}\n                            value={usernameval}\n                  />\n              </FormGroup>\n             < FormGroup className=\"booking__form d-inline-block me-4 mb-4\">\n                  <input\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    required\n                    ref={loginPasswordRef}\n\t\t\t\t\t onChange={(e) => setPwd(e.target.value)}\n                            value={pwd}\n\t\t\t\t\t\n                  />\n              </FormGroup>\n\t\t\t  <FormGroup>\n\t\t\t   <div className=\"payment text-center mt-4\">\n                <button  type=\"submit\">\n                  Recover Password\n                </button>\n\t\t\t\t </div>\n\t\t\t\t   </FormGroup>\n          \n              </Form>\n\t\t\t  \n            \n  );\n};\n\n\nexport default ForgotPass;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}